Задание:
Установите unbound на вашей публичной виртуальной машине.
Сконфигурируйте unbound для соответствия следующим требованиям:
отвечать должен только для адресов 10.0.0.0/8;
должен быть включен кэш;
должен быть включен DNS over TLS;
должен быть включен DNSSEC;
должен скрывать версию для безопасности;
должен форвардить запросы на CloudFlare.
На проверку отправьте ваш конфигурацонный файл.

*************************************************************************
Решение
*************************************************************************

Ефошкин Максим Вячеславович
ОТПРАВЛЕНО
29.07.2022 09:39
1. Установите unbound на вашей публичной виртуальной машине.
address: 158.160.1.222
apt install unbound

2. Сконфигурируйте unbound для соответствия следующим требованиям
Как я читал в man unbound.conf(5)  , cache включен по умолчанию. Там есть настройки кеша которые определяют его TTL размер хранения, так же cachedb можно настроить. Вот, так как в задании просто говорится что бы был кэш, как я понял он работает по умолчанию. Поправьте если не так. 

Конфиг:
server:
  verbosity: 1
  interface: 158.160.1.222
  access-control: 10.0.0.0/8 allow
  do-ip4: yes
  do-ip6: yes
  do-udp: yes
  do-tcp: yes
  do-daemonize: yes
  auto-trust-anchor-file: "/var/lib/unbound/root.key"
  tls-system-cert: yes
  hide-version: yes
forward-zone:
   name: "."
   forward-tls-upstream: yes
   forward-addr: 1.0.0.1@53#one.one.one.one
   forward-addr: 1.1.1.1@53#one.one.one.one


ОТВЕТ КУРАТОРА
Алексей Кузнецов (@Hystrix)
ВЫПОЛНЕНО 5
29.07.2022 21:41
Добрый день!

Отличные знание темы и выполнение задания, замечаний и вопросов нет!


******************************************************************************
Теория
******************************************************************************

LNXA-04 02: DNS. Unbound
Описание:
Продолжим тему с DNS-сервисами и рассмотрим еще одно решение. Unbound — это рекурсивный и кэширующий DNS-сервер с упором на безопасность, разрабатываемый компаниями NLnet Labs, VeriSign Inc, Nominet и Kirei и распространяющийся бесплатно по лицензии BSD. Код проекта изначально был задуман таким образом, чтобы быть легким, удовлетворять минимальным требованиям работы в качестве сервера валидатора, распознавателя и кэширования и при этом быть производительным и безопасным. Проект Unbound представляет собой набор модульных компонентов, которые включают в себя такие функции, как проверка расширенной безопасности (DNSSEC), IPv6 и API-библиотеки клиентов как неотъемлемую часть архитектуры, в других же решениях, эти компоненты могут быть отдельными плагинами. Первоначально написанный для Posix-совместимой Unix-подобной операционной системы, Unbound в настоящее время работает на FreeBSD, OpenBSD, NetBSD и Linux, а также на Microsoft Windows, при этом установка и настройка Unbound достаточно проста и большинство современных ОС уже имеют пакеты Unbound в репозиториях. Но при всем этом, сервер является только рекурсором и не может быть авторитетным.

Синтаксис конфигурационных файлов чем-то похож на YAML и имеет достаточно небольшое количество директив для настройки. Попробуем настроить простейший вариант, для чего установим сервер с помощью apt install unbound и попробуем сконфигурировать в варианте решения для небольшой локальной сети c адресацией 10.0.0.0/8, где все запросы будут отправляться на внешние серверы.

Вся конфигурация будет выполняться в файле /etc/unbound/unbound.conf, примерно в таком виде:

server:
  verbosity: 1
  interface: 192.168.1.1
  access-control: 10.0.0.0/8 allow
  access-control: 127.0.0.0/8 allow
  do-ip4: yes
  do-ip6: yes
  do-udp: yes
  do-tcp: yes
  do-daemonize: yes

forward-zone:
   name: "."
   forward-addr: 1.0.0.1@53#one.one.one.one
   forward-addr: 1.1.1.1@53#one.one.one.one
   forward-addr: 8.8.4.4@53#dns.google
   forward-addr: 8.8.8.8@53#dns.google
   forward-addr: 9.9.9.9@53#dns.quad9.net
Такая конфигурация позволит запустить сервер на адресе 192.168.1.1 (interface), он будет работать только на IPv4 (do-ipv4) на протоколах TCP (do-tcp) и UDP (do-udp), работать сервисом (do-daemonize) и перенаправлять все запросы (name ".") на адреса серверов от CloudFlare, Google и QUAD9.

Полезные ссылки:
UNBOUND
Unbound ArchWiki
Избавляемся от BIND в пользу Unbound на CentOS 6
Пряморукий DNS: делаем правильно



